import{d as b,u as f,k as v,c as a,b as t,n as u,e as o,A as _,t as h,f as c,p as w,w as p,r as k,h as g,o as l}from"./index-BYj9fpU8.js";function S(x,s="YYYY-MM-DD HH:mm:ss"){const r=new Date(x),m=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),d=String(r.getDate()).padStart(2,"0"),e=String(r.getHours()).padStart(2,"0"),i=String(r.getMinutes()).padStart(2,"0"),y=String(r.getSeconds()).padStart(2,"0");return s.replace("YYYY",String(m)).replace("MM",n).replace("DD",d).replace("HH",e).replace("mm",i).replace("ss",y)}const C={class:"min-h-screen bg-gray-50 py-12"},Y={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},D={class:"bg-white shadow rounded-lg"},M={class:"p-6"},H={key:0,class:"flex justify-center items-center py-8"},V={key:1,class:"space-y-6"},B={class:"mt-1"},N=["value"],z={class:"mt-1"},A=["value"],F={class:"mt-1"},I={key:0},U={class:"mt-1"},j=["value"],E={key:1},T={class:"mt-1"},q=["value"],G={key:2,class:"text-center py-8"},J={class:"text-red-600 mb-4"},K={key:3,class:"mt-8 flex space-x-4"},O=b({__name:"index",setup(x){const{user:s,loading:r,getUserInfo:m}=f(),n=async()=>{try{await m()}catch(d){console.error("Failed to refresh user info:",d)}};return v(async()=>{s.value||await n()}),(d,e)=>{const i=k("router-link");return l(),a("div",C,[t("div",Y,[t("div",D,[e[10]||(e[10]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"个人资料")],-1)),t("div",M,[o(r)?(l(),a("div",H,e[0]||(e[0]=[t("svg",{class:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),t("span",{class:"ml-2 text-gray-600"},"加载中...",-1)]))):o(s)?(l(),a("div",V,[t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700"},"用户名",-1)),t("div",B,[t("input",{type:"text",value:o(s).username,readonly:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500 sm:text-sm"},null,8,N)])]),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"邮箱",-1)),t("div",z,[t("input",{type:"email",value:o(s).email,readonly:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500 sm:text-sm"},null,8,A)])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"用户状态",-1)),t("div",F,[t("span",{class:_(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",o(s).status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},h(o(s).status===1?"正常":"禁用"),3)])]),o(s).bio?(l(),a("div",I,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700"},"个人简介",-1)),t("div",U,[t("textarea",{value:o(s).bio,readonly:"",rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500 sm:text-sm"},null,8,j)])])):u("",!0),o(s).created_at?(l(),a("div",E,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"注册时间",-1)),t("div",T,[t("input",{type:"text",value:o(S)(o(s).created_at),readonly:"",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-50 text-gray-500 sm:text-sm"},null,8,q)])])):u("",!0)])):(l(),a("div",G,[t("div",J,[c(o(w),{class:"h-12 w-12 mx-auto"})]),e[6]||(e[6]=t("p",{class:"text-gray-600"},"无法加载用户信息",-1)),t("button",{onClick:n,class:"mt-4 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"}," 重新加载 ")])),o(s)?(l(),a("div",K,[e[9]||(e[9]=t("button",{type:"button",class:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"}," 编辑资料 ",-1)),c(i,{to:"/settings",class:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:p(()=>e[7]||(e[7]=[g(" 账户设置 ")])),_:1,__:[7]}),c(i,{to:"/",class:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:p(()=>e[8]||(e[8]=[g(" 返回首页 ")])),_:1,__:[8]})])):u("",!0)])])])])}}});export{O as default};
