import{d as B,u as E,a as j,i as c,j as z,k as N,l as U,m as A,c as m,b as s,n as y,h as u,f as p,w,r as D,e as r,p as S,t as g,q as T,s as b,v as h,x as R,y as F,o as f}from"./index-BYj9fpU8.js";const H={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},P={class:"max-w-md w-full space-y-8"},G={class:"mt-2 text-center text-sm text-gray-600"},I={key:0,class:"bg-red-50 border border-red-200 rounded-md p-4"},J={class:"flex"},K={class:"flex-shrink-0"},L={class:"ml-3"},O={class:"text-red-800"},Q={class:"rounded-md shadow-sm -space-y-px"},W=["disabled"],X=["disabled"],Y={class:"flex items-center justify-between"},Z={class:"flex items-center"},$={class:"text-sm"},ee=["disabled"],se={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},re=B({__name:"index",setup(te){const _=F(),d=U(),{login:k,loading:l,error:v}=E(),{success:V,error:C}=j(),t=c({account:"",password:"",remember:!1}),o=c(""),M=z(()=>t.value.account.trim()!==""&&t.value.password.trim()!==""),q=async()=>{try{if(o.value="",!t.value.account.trim()){o.value="请输入用户名或邮箱";return}if(!t.value.password.trim()){o.value="请输入密码";return}if(t.value.password.length<6){o.value="密码长度不能少于6位";return}const a={account:t.value.account.trim(),password:t.value.password.trim()};await k(a),V("登录成功！");const e=d.query.redirect||"/";setTimeout(()=>{_.push(e)},500)}catch(a){const e=a instanceof Error?a.message:"登录失败，请重试";o.value=e,C(e)}},i=c(null);return N(()=>{o.value="",d.query.error&&(o.value=d.query.error),i.value=()=>{v.value&&(o.value=v.value)}}),A(()=>{i.value&&i.value()}),(a,e)=>{const x=D("router-link");return f(),m("div",H,[s("div",P,[s("div",null,[e[5]||(e[5]=s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," 登录您的账户 ",-1)),s("p",G,[e[4]||(e[4]=u(" 或者 ")),p(x,{to:"/register",class:"font-medium text-blue-600 hover:text-blue-500"},{default:w(()=>e[3]||(e[3]=[u(" 创建新账户 ")])),_:1,__:[3]})])]),o.value?(f(),m("div",I,[s("div",J,[s("div",K,[p(r(S),{class:"h-5 w-5 text-red-400"})]),s("div",L,[s("p",O,g(o.value),1)])])])):y("",!0),s("form",{class:"mt-8 space-y-6",onSubmit:T(q,["prevent"])},[s("div",Q,[s("div",null,[e[6]||(e[6]=s("label",{for:"account",class:"sr-only"},"账户",-1)),b(s("input",{id:"account","onUpdate:modelValue":e[0]||(e[0]=n=>t.value.account=n),name:"account",type:"text",required:"",disabled:r(l),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"用户名或邮箱"},null,8,W),[[h,t.value.account]])]),s("div",null,[e[7]||(e[7]=s("label",{for:"password",class:"sr-only"},"密码",-1)),b(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n),name:"password",type:"password",required:"",disabled:r(l),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"密码"},null,8,X),[[h,t.value.password]])])]),s("div",Y,[s("div",Z,[b(s("input",{id:"remember-me","onUpdate:modelValue":e[2]||(e[2]=n=>t.value.remember=n),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[R,t.value.remember]]),e[8]||(e[8]=s("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," 记住我 ",-1))]),s("div",$,[p(x,{to:"/forgot-password",class:"font-medium text-blue-600 hover:text-blue-500"},{default:w(()=>e[9]||(e[9]=[u(" 忘记密码？ ")])),_:1,__:[9]})])]),s("div",null,[s("button",{type:"submit",disabled:r(l)||!M.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[r(l)?(f(),m("span",se,e[10]||(e[10]=[s("svg",{class:"animate-spin h-5 w-5 text-blue-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):y("",!0),u(" "+g(r(l)?"登录中...":"登录"),1)],8,ee)])],32)])])}}});export{re as default};
